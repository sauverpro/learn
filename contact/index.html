<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container-fluid p-4">
      <div class="card shadow mx-auto mt-5" style="width: 40%">
        <div class="card-header bg-primary text-white" style="font-size: 25px">
          <h2 id="head"><i class="bx bxs-user-circle"></i>Login</h2>
        </div>
        <form class="pt-4 pb-4 mx-auto" style="width: 90%">
          <div class="form-group mb-3">
            <p id="message"></p>
            <label for="text"><i class="bx bxs-user"></i>Username</label>
            <input
              type="text"
              class="form-control"
              placeholder="Enter email"
              id="logEmail"
            />
          </div>
          <div class="form-group mb-3">
            <label for="pwd"><i class="bx bxs-key"></i>Password</label>
            <input
              type="password"
              class="form-control"
              placeholder="Enter password"
              id="logPwd"
            />
          </div>

          <input
            type="submit"
            class="btn btn-primary mt-2"
            id="login"
            value="Login"
          />
          <p class="text-primary mt-2 float-end" id="up">Create Account</p>
        </form>
      </div>
    </div>
  </body>
</html>

<script>
  let userName = document.getElementById("logEmail");
  let passWord = document.getElementById("logPwd");
  let button = document.getElementById("login");
  let head = document.getElementById("head");
  let change = document.getElementById("up");
  let message = document.getElementById("message");
  if (localStorage.getItem("users") != null) {
    var users = JSON.parse(localStorage.getItem("users"));
  } else {
    var users = [];
  }
  button.onclick = function (e) {
    e.preventDefault();
    const username = userName.value;
    const pass = passWord.value;
    for (let log of users) {
      if (username == log.Username &&  pass == log.Pass) {
        message.innerHTML = "login successful";
        location.href = "contact.html";
        break;
      } else {
        message.innerHTML = "Authentication Failed ";
        location.href = "index.html";
      }
    }
  };
  change.onclick = function (e) {
    e.preventDefault();
    head.innerHTML = "Sign Up";
    button.value = "Sign Up";
    button.setAttribute("id", "SignUp");
    change.setAttribute("id", "in");
    change.innerHTML = "Sign In to your Account";
    var signupButton = document.getElementById("SignUp");
    signupButton.setAttribute("onclick", "register()");
  };
  let register = () => {
    const username = userName.value;
    const pass = passWord.value;
    user = {
      Username: username,
      Pass: pass,
    };
    users.push(user);
    localStorage.setItem("users", JSON.stringify(users));
  };
  //  Eqityrwanda@12
</script>
